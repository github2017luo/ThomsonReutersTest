<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>49.0</apiVersion>
    <assignments>
        <name>Final_Display_Alert</name>
        <label>Final Display Alert ++</label>
        <locationX>182</locationX>
        <locationY>1646</locationY>
        <assignmentItems>
            <assignToReference>Ebillalerttext</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>EbillContactssdAlert</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Alert_MessageSI</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SIalertmessage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>MarkedforDeleteAlert</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>DelaccountText</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>AccAffiliationAlert</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>AccountAffiliationText</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>BrandSegmentValue</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>BrandSegmentAlert</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CaseEnquiryValue</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CaseEnquiry</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Alerts</targetReference>
        </connector>
    </assignments>
    <constants>
        <name>EbillEmailCont</name>
        <dataType>String</dataType>
        <value>
            <stringValue>EBILL EMAIL CONTACT</stringValue>
        </value>
    </constants>
    <constants>
        <name>GLIArchive</name>
        <dataType>String</dataType>
        <value>
            <stringValue>GLI Archive</stringValue>
        </value>
    </constants>
    <decisions>
        <name>Contact_Null</name>
        <label>Contact Null?</label>
        <locationX>358</locationX>
        <locationY>278</locationY>
        <defaultConnector>
            <targetReference>Alerts</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Contact_check</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Caselist.Contact.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Accounts</targetReference>
            </connector>
            <label>Contact check</label>
        </rules>
    </decisions>
    <decisions>
        <name>Got_Account_Si_records</name>
        <label>Got Account Si records?</label>
        <locationX>182</locationX>
        <locationY>974</locationY>
        <defaultConnector>
            <targetReference>get_Contact_SI</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Acc_Si_Present</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>AccountSi.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Long_term_Archive</targetReference>
            </connector>
            <label>Acc Si Present</label>
        </rules>
    </decisions>
    <decisions>
        <name>Long_term_Archive</name>
        <label>Long term Archive?</label>
        <locationX>182</locationX>
        <locationY>1310</locationY>
        <defaultConnector>
            <targetReference>Final_Display_Alert</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>LongTermArchive</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Caselist.Account.Long_Term_Archive__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_rectype</targetReference>
            </connector>
            <label>LongTermArchive?</label>
        </rules>
    </decisions>
    <decisions>
        <description>sap acc no check, for contactssd query</description>
        <name>Sap_Acc_no_check</name>
        <label>Sap Acc no. check</label>
        <locationX>182</locationX>
        <locationY>518</locationY>
        <defaultConnector>
            <targetReference>GEt_AccountSi</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>sapAcc_no_Present</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Caselist.USL_SAP_Account_Number__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>get_Contact_SSD</targetReference>
            </connector>
            <label>sapAcc no. Present?</label>
        </rules>
    </decisions>
    <description>For DSS-11474</description>
    <formulas>
        <name>AccountAffiliationText</name>
        <dataType>String</dataType>
        <expression>IF(CONTAINS({!$Label.ESC_AccountAffiliationReference},{!AccountList.LCRM_Account_Tier__c}),{!AccountList.LCRM_Account_Tier__c},&quot;&quot;)</expression>
    </formulas>
    <formulas>
        <name>BrandSegmentAlert</name>
        <dataType>String</dataType>
        <expression>IF(ISPICKVAL({!Caselist.ESC_Product_Segment_Brand__c},  &apos;&apos;) , {!$Label.Product_Brand_Segment_Alert}, &quot;&quot;)</expression>
    </formulas>
    <formulas>
        <name>CaseEnquiry</name>
        <dataType>String</dataType>
        <expression>IF(AND(ISPICKVAL({!Caselist.ESC_Case_Type__c}, &apos;Request for Action&apos;) , OR(ISPICKVAL({!Caselist.ESC_EnquiryType__c}, &apos;Suspend&apos;),ISPICKVAL({!Caselist.ESC_EnquiryType__c}, &apos;Unsuspend&apos;))), {!$Label.CaseEnquiryAlert}, &apos;&apos;)</expression>
    </formulas>
    <formulas>
        <name>DelaccountText</name>
        <dataType>String</dataType>
        <expression>IF({!Rectypelist.Name}=={!GLIArchive},{!$Label.ESC_MarkedforDelete},&quot;&quot;)</expression>
    </formulas>
    <formulas>
        <name>EbillContactssdAlert</name>
        <dataType>String</dataType>
        <expression> if({!ContactSsdList.LCRM_SAP_Role__c}==&quot;EBILL EMAIL CONTACT&quot;,({!ContactSsdList.LCRM_First_Name__c}+&quot; &quot;+{!ContactSsdList.LCRM_Last_Name__c} +&quot; &quot;+{!$Label.ESC_ContactSSDAlert}),&quot;&quot;)</expression>
    </formulas>
    <formulas>
        <name>FinalDisplayAlert</name>
        <dataType>String</dataType>
        <expression>IF({!Ebillalerttext}&lt;&gt;&quot;&quot;,&quot;&lt;b&gt;&quot;+{!Ebillalerttext}+ &quot;&lt;/b&gt;&quot; + &quot;&lt;br/&gt;&lt;br/&gt;&quot; ,&quot;&quot;)+ IF({!Alert_MessageSI}&lt;&gt;&quot;&quot;,&quot;&lt;b&gt;&quot;+{!Alert_MessageSI}+ &quot;&lt;/b&gt;&quot; + &quot;&lt;br/&gt;&lt;br/&gt;&quot; ,&quot;&quot;)+ IF({!MarkedforDeleteAlert}&lt;&gt;&quot;&quot;,&quot;&lt;b&gt;&quot;+{!MarkedforDeleteAlert}+ &quot;&lt;/b&gt;&quot; + &quot;&lt;br/&gt;&lt;br/&gt;&quot; ,&quot;&quot;)+ IF({!AccAffiliationAlert}&lt;&gt;&quot;&quot;,&quot;&lt;b&gt;&quot;+{!AccAffiliationAlert}+ &quot;&lt;/b&gt;&quot; + &quot;&lt;br/&gt;&lt;br/&gt;&quot; ,&quot;&quot;) + IF({!BrandSegmentValue}&lt;&gt;&quot;&quot;,&quot;&lt;b&gt;&quot;+{!$Label.Product_Brand_Segment_Alert}+ &quot;&lt;/b&gt;&quot; + &quot;&lt;br/&gt;&lt;br/&gt;&quot; ,&quot;&quot;) + IF({!CaseEnquiryValue}&lt;&gt;&quot;&quot;,&quot;&lt;b&gt;&quot;+{!$Label.CaseEnquiryAlert}+ &quot;&lt;/b&gt;&quot; + &quot;&lt;br/&gt;&lt;br/&gt;&quot; ,&quot;&quot;)</expression>
    </formulas>
    <formulas>
        <name>SIalertmessage</name>
        <dataType>String</dataType>
        <expression>IF({!AccountSi.Id}&lt;&gt;&quot;&quot;||{!ContactSi.Id}&lt;&gt;&quot;&quot;,{!$Label.SIalert},&quot;&quot;)</expression>
    </formulas>
    <interviewLabel>ESC Case Alerts {!$Flow.CurrentDateTime}</interviewLabel>
    <label>ESC Case Alerts</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordLookups>
        <name>Get_Accounts</name>
        <label>Get Accounts</label>
        <locationX>182</locationX>
        <locationY>398</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Sap_Acc_no_check</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Caselist.Account.Id</elementReference>
            </value>
        </filters>
        <object>Account</object>
        <outputReference>AccountList</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>RecordTypeId</queriedFields>
        <queriedFields>Long_Term_Archive__c</queriedFields>
        <queriedFields>LCRM_Account_Tier__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>GEt_AccountSi</name>
        <label>GEt AccountSi</label>
        <locationX>182</locationX>
        <locationY>854</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Got_Account_Si_records</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ESC_Account__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Caselist.AccountId</elementReference>
            </value>
        </filters>
        <object>ESC_Account_Special_Instruction__c</object>
        <outputReference>AccountSi</outputReference>
        <queriedFields>Id</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Get_case_records</name>
        <label>Get case records</label>
        <locationX>358</locationX>
        <locationY>158</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Contact_Null</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Caseid</elementReference>
            </value>
        </filters>
        <object>Case</object>
        <outputReference>Caselist</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>ContactId</queriedFields>
        <queriedFields>USL_SAP_Account_Number__c</queriedFields>
        <queriedFields>AccountId</queriedFields>
        <queriedFields>ESC_Product_Segment_Brand__c</queriedFields>
        <queriedFields>ESC_EnquiryType__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>get_Contact_SI</name>
        <label>get Contact SI</label>
        <locationX>270</locationX>
        <locationY>1094</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Long_term_Archive</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ESC_Contact__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Caselist.ContactId</elementReference>
            </value>
        </filters>
        <object>ESC_Contact_Special_Instruction__c</object>
        <outputReference>ContactSi</outputReference>
        <queriedFields>Id</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>get_Contact_SSD</name>
        <label>get Contact SSD</label>
        <locationX>50</locationX>
        <locationY>638</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>GEt_AccountSi</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>LCRM_SAP_Account_Number__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Caselist.USL_SAP_Account_Number__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>LCRM_SAP_Role__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>EBILL EMAIL CONTACT</stringValue>
            </value>
        </filters>
        <object>LCRM_Contact_SSD__c</object>
        <outputReference>ContactSsdList</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>LCRM_SAP_Role__c</queriedFields>
        <queriedFields>LCRM_First_Name__c</queriedFields>
        <queriedFields>LCRM_Last_Name__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Get_rectype</name>
        <label>Get rectype</label>
        <locationX>50</locationX>
        <locationY>1430</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Final_Display_Alert</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>AccountList.RecordTypeId</elementReference>
            </value>
        </filters>
        <object>RecordType</object>
        <outputReference>Rectypelist</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Name</queriedFields>
    </recordLookups>
    <runInMode>SystemModeWithoutSharing</runInMode>
    <screens>
        <name>Alerts</name>
        <label>Alerts</label>
        <locationX>358</locationX>
        <locationY>1862</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>DisplayAlert</name>
            <fieldText>&lt;p&gt;{!FinalDisplayAlert}&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>false</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <start>
        <locationX>232</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Get_case_records</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>AccAffiliationAlert</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>Accountid</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <value>
            <elementReference>Caselist.Account.Id</elementReference>
        </value>
    </variables>
    <variables>
        <name>AccountList</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Account</objectType>
    </variables>
    <variables>
        <name>AccountSi</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>ESC_Account_Special_Instruction__c</objectType>
    </variables>
    <variables>
        <name>Alert_MessageSI</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>BrandSegmentValue</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>CaseEnquiryValue</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>Caseid</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>Caselist</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Case</objectType>
    </variables>
    <variables>
        <name>Contactid</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <value>
            <elementReference>Caselist.Contact.Id</elementReference>
        </value>
    </variables>
    <variables>
        <name>ContactSi</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>ESC_Contact_Special_Instruction__c</objectType>
    </variables>
    <variables>
        <name>ContactSsdList</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>LCRM_Contact_SSD__c</objectType>
    </variables>
    <variables>
        <name>Ebillalerttext</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>MarkedforDeleteAlert</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>Rectypelist</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>RecordType</objectType>
    </variables>
</Flow>
